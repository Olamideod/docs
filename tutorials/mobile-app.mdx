---
title: "Mobile App Integration"
description: "Integrate Protekt authentication into React Native and Flutter apps"
---

# Mobile App Integration

Learn how to integrate Protekt authentication into your mobile applications using React Native and Flutter.

## React Native Integration

### Prerequisites

- React Native development environment set up
- Protekt account and application configured
- iOS Simulator or Android Emulator

### Step 1: Install Dependencies

```bash
npm install @protekt/react-native
npm install react-native-url-polyfill
```

### Step 2: Configure iOS (iOS only)

Add the following to your `ios/YourApp/Info.plist`:

```xml
<key>CFBundleURLTypes</key>
<array>
  <dict>
    <key>CFBundleURLName</key>
    <string>protekt</string>
    <key>CFBundleURLSchemes</key>
    <array>
      <string>your-app-scheme</string>
    </array>
  </dict>
</array>
```

### Step 3: Configure Android (Android only)

Add to your `android/app/src/main/AndroidManifest.xml`:

```xml
<activity>
  <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="your-app-scheme" />
  </intent-filter>
</activity>
```

### Step 4: Initialize Protekt

```javascript
// src/config/protekt.js
import { Protekt } from '@protekt/react-native';

export const protekt = new Protekt({
  domain: 'your-tenant.protekt.com',
  clientId: 'your-client-id',
  redirectUri: 'your-app-scheme://callback',
  responseType: 'code'
});
```

### Step 5: Create Authentication Components

```jsx
// src/components/Login.js
import React from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';
import { protekt } from '../config/protekt';

const Login = ({ navigation }) => {
  const handleLogin = async () => {
    try {
      await protekt.login();
    } catch (error) {
      console.error('Login failed:', error);
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Welcome to Our App</Text>
      <Text style={styles.subtitle}>Sign in to access your account</Text>
      <TouchableOpacity style={styles.button} onPress={handleLogin}>
        <Text style={styles.buttonText}>Sign In with Protekt</Text>
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    padding: 20,
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 10,
  },
  subtitle: {
    fontSize: 16,
    color: '#666',
    marginBottom: 30,
    textAlign: 'center',
  },
  button: {
    backgroundColor: '#007bff',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: 'bold',
  },
});

export default Login;
```

### Step 6: Handle Authentication Callback

```jsx
// src/components/Callback.js
import React, { useEffect } from 'react';
import { View, Text, ActivityIndicator } from 'react-native';
import { protekt } from '../config/protekt';

const Callback = ({ navigation }) => {
  useEffect(() => {
    const handleCallback = async () => {
      try {
        await protekt.handleCallback();
        navigation.replace('Dashboard');
      } catch (error) {
        console.error('Callback failed:', error);
        navigation.replace('Login');
      }
    };

    handleCallback();
  }, [navigation]);

  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <ActivityIndicator size="large" color="#007bff" />
      <Text style={{ marginTop: 20 }}>Completing sign in...</Text>
    </View>
  );
};

export default Callback;
```

### Step 7: Protected Dashboard

```jsx
// src/components/Dashboard.js
import React, { useState, useEffect } from 'react';
import { View, Text, TouchableOpacity, StyleSheet } from 'react-native';
import { protekt } from '../config/protekt';

const Dashboard = ({ navigation }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const loadUser = async () => {
      try {
        const userData = await protekt.getUser();
        setUser(userData);
      } catch (error) {
        console.error('Failed to load user:', error);
      } finally {
        setLoading(false);
      }
    };

    loadUser();
  }, []);

  const handleLogout = async () => {
    try {
      await protekt.logout();
      navigation.replace('Login');
    } catch (error) {
      console.error('Logout failed:', error);
    }
  };

  if (loading) {
    return (
      <View style={styles.container}>
        <Text>Loading...</Text>
      </View>
    );
  }

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Welcome, {user?.name}!</Text>
      <View style={styles.userInfo}>
        <Text>Email: {user?.email}</Text>
        <Text>User ID: {user?.sub}</Text>
      </View>
      <TouchableOpacity style={styles.logoutButton} onPress={handleLogout}>
        <Text style={styles.logoutButtonText}>Sign Out</Text>
      </TouchableOpacity>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    padding: 20,
    justifyContent: 'center',
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 20,
    textAlign: 'center',
  },
  userInfo: {
    backgroundColor: '#f8f9fa',
    padding: 20,
    borderRadius: 8,
    marginBottom: 20,
  },
  logoutButton: {
    backgroundColor: '#dc3545',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
    alignItems: 'center',
  },
  logoutButtonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: 'bold',
  },
});

export default Dashboard;
```

## Flutter Integration

### Prerequisites

- Flutter SDK installed
- Protekt account and application configured
- iOS Simulator or Android Emulator

### Step 1: Add Dependencies

Add to your `pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  protekt_flutter: ^1.0.0
  url_launcher: ^6.0.0
```

### Step 2: Configure iOS (iOS only)

Add to your `ios/Runner/Info.plist`:

```xml
<key>CFBundleURLTypes</key>
<array>
  <dict>
    <key>CFBundleURLName</key>
    <string>protekt</string>
    <key>CFBundleURLSchemes</key>
    <array>
      <string>your-app-scheme</string>
    </array>
  </dict>
</array>
```

### Step 3: Configure Android (Android only)

Add to your `android/app/src/main/AndroidManifest.xml`:

```xml
<activity>
  <intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="your-app-scheme" />
  </intent-filter>
</activity>
```

### Step 4: Initialize Protekt

```dart
// lib/config/protekt.dart
import 'package:protekt_flutter/protekt_flutter.dart';

class ProtektConfig {
  static final Protekt protekt = Protekt(
    domain: 'your-tenant.protekt.com',
    clientId: 'your-client-id',
    redirectUri: 'your-app-scheme://callback',
    responseType: 'code',
  );
}
```

### Step 5: Create Authentication Screens

```dart
// lib/screens/login_screen.dart
import 'package:flutter/material.dart';
import '../config/protekt.dart';

class LoginScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(
              'Welcome to Our App',
              style: TextStyle(
                fontSize: 24,
                fontWeight: FontWeight.bold,
              ),
            ),
            SizedBox(height: 10),
            Text(
              'Sign in to access your account',
              style: TextStyle(
                fontSize: 16,
                color: Colors.grey[600],
              ),
            ),
            SizedBox(height: 30),
            ElevatedButton(
              onPressed: () async {
                try {
                  await ProtektConfig.protekt.login();
                } catch (error) {
                  print('Login failed: $error');
                }
              },
              child: Text('Sign In with Protekt'),
              style: ElevatedButton.styleFrom(
                primary: Colors.blue,
                padding: EdgeInsets.symmetric(horizontal: 30, vertical: 15),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

### Step 6: Handle Callback

```dart
// lib/screens/callback_screen.dart
import 'package:flutter/material.dart';
import '../config/protekt.dart';

class CallbackScreen extends StatefulWidget {
  @override
  _CallbackScreenState createState() => _CallbackScreenState();
}

class _CallbackScreenState extends State<CallbackScreen> {
  @override
  void initState() {
    super.initState();
    _handleCallback();
  }

  Future<void> _handleCallback() async {
    try {
      await ProtektConfig.protekt.handleCallback();
      Navigator.pushReplacementNamed(context, '/dashboard');
    } catch (error) {
      print('Callback failed: $error');
      Navigator.pushReplacementNamed(context, '/login');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            CircularProgressIndicator(),
            SizedBox(height: 20),
            Text('Completing sign in...'),
          ],
        ),
      ),
    );
  }
}
```

### Step 7: Protected Dashboard

```dart
// lib/screens/dashboard_screen.dart
import 'package:flutter/material.dart';
import '../config/protekt.dart';

class DashboardScreen extends StatefulWidget {
  @override
  _DashboardScreenState createState() => _DashboardScreenState();
}

class _DashboardScreenState extends State<DashboardScreen> {
  Map<String, dynamic>? user;
  bool loading = true;

  @override
  void initState() {
    super.initState();
    _loadUser();
  }

  Future<void> _loadUser() async {
    try {
      final userData = await ProtektConfig.protekt.getUser();
      setState(() {
        user = userData;
        loading = false;
      });
    } catch (error) {
      print('Failed to load user: $error');
      setState(() {
        loading = false;
      });
    }
  }

  Future<void> _handleLogout() async {
    try {
      await ProtektConfig.protekt.logout();
      Navigator.pushReplacementNamed(context, '/login');
    } catch (error) {
      print('Logout failed: $error');
    }
  }

  @override
  Widget build(BuildContext context) {
    if (loading) {
      return Scaffold(
        body: Center(child: Text('Loading...')),
      );
    }

    return Scaffold(
      appBar: AppBar(
        title: Text('Dashboard'),
        actions: [
          IconButton(
            icon: Icon(Icons.logout),
            onPressed: _handleLogout,
          ),
        ],
      ),
      body: Padding(
        padding: EdgeInsets.all(20),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'Welcome, ${user?['name']}!',
              style: TextStyle(
                fontSize: 24,
                fontWeight: FontWeight.bold,
              ),
            ),
            SizedBox(height: 20),
            Container(
              padding: EdgeInsets.all(20),
              decoration: BoxDecoration(
                color: Colors.grey[100],
                borderRadius: BorderRadius.circular(8),
              ),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('Email: ${user?['email']}'),
                  SizedBox(height: 10),
                  Text('User ID: ${user?['sub']}'),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }
}
```

## Testing Your Mobile Integration

1. **React Native**: Run `npx react-native run-ios` or `npx react-native run-android`
2. **Flutter**: Run `flutter run`

## Platform-Specific Considerations

### iOS
- Use Safari View Controller for authentication
- Handle deep linking properly
- Test on both simulator and device

### Android
- Use Chrome Custom Tabs for authentication
- Handle app state changes
- Test on different Android versions

## Next Steps

- [Multi-Factor Authentication](/how-to-guides/enable-mfa) - Add biometric authentication
- [Biometric Authentication](/tutorials/secure-your-app) - Implement fingerprint/face ID
- [Offline Support](/tutorials/secure-your-app) - Handle offline scenarios
- [Push Notifications](/tutorials/secure-your-app) - Security alerts and MFA prompts 